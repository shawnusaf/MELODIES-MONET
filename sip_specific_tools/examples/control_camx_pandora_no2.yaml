analysis:
  start_time: "2022-07-20 00:00:00" # UTC
  end_time: "2022-07-20 23:00:00" # UTC
  output_dir: /glade/campaign/acom/acom-weather/pfister/ANALYSIS/MELODIES/fromPablo/Demo/output/pandora 
  debug: True
  save:
    paired:
      method: netcdf
      data: all
  read:
    paired:
      method: netcdf
      # output filenames should be: {prefix}_{obs}_{model}.nc4
      filenames: {'pandora_CAMX': ['pandora_CAMX.nc4']}

model:
  CAMX: # model label
    files: /glade/work/plichtig/camx_input/toy_data/CAMx73.cb7r1_cf3.20220720.35.camx.avrg.grd03.nc
    files_vert: /glade/work/plichtig/camx/processors/wrfcamx_v5.2/camx_input/camx.3d.4km_lonlatcorrected.20220720.nc
    mod_type: "camx"
    surf_only: False  # specify that we have only one vertical level; WRF-Chem specific
    radius_of_influence: 6000 # meters
    mapping: # of _model_ species name to _obs_ species name
      pandora: # specifically for the obs labeled 'airnow'
        NO2: "NO2"
    projection: ~
    preprocessing:
      total_columns: "NO2"

obs:
  pandora: # obs label
    filename: /glade/campaign/acom/acom-weather/pfister/ANALYSIS/MELODIES/fromPablo/Demo/input/Pandora*s1_BoulderCO*_L2_rnvh3p1-8.txt
    obs_type: pandora
    variables: # optional
      "Column 62":
         unit_scale: 6.02e+19 # mol/m2 to molec/cm2
         unit_scale_method: "*"
         ylabel: 'NO$_2$ (molec/cm2)'
         use_ylabel: True
         vmax: 1e16
         rename: NO2
      "Column 36": {}
    data_proc:
      filter_dict: {"Column 36": {"oper": "isin", "value": [0, 10]}, "NO2": {"oper": ">=", "value": 0}} 
    
plots:
  plot_grp1:
    type: "timeseries"
    fig_kwargs:
      figsize: [12, 6]
    default_plot_kwargs:
      linewidth: 2.0
      markersize: 10.
    text_kwargs: # optional
      fontsize: 24.
    domain_type: ["all", "custom:box"]
    domain_name: ["CONUS", "Front Range"]
    domain_info:
      'Front Range':
        bounds: [-105.5, -104, 39.16, 40.5]  
    data: ["pandora_CAMX"]
    data_proc:
      rem_obs_nan: True
      ts_select_time: "time"  # `ts_` indicates this is time series plot-specific
      # ^ Time used for avg and plotting
      ts_avg_window: "h"
      # ^ Options: None for no averaging, pandas resample rule (e.g., 'h', 'D')
      set_axis: True
      # ^ If true, add `vmin_plot` and `vmax_plot` for each variable in obs.

  plot_grp10:
    type: "diurnal" # plot type
    fig_kwargs: # optional; to define figure options
      figsize: [12, 6] # figure size (width, height) in inches
    default_plot_kwargs:
      linewidth: 2.0
      markersize: 10.
    text_kwargs: # optional
      fontsize: 24.
    domain_type: ["custom:box"]
    domain_name: ["Front Range"]
    domain_info:
      'Front Range':
        bounds: [-105.5, -104, 39.16, 40.5]  
    data: ["pandora_CAMX"]
    settings:
      shading_range: IQR
    data_proc:
      rem_obs_nan: True
      ts_select_time: "time" #name of time variable in data
      ts_avg_window: "h"
      set_axis: True
      shading_range: 'IQR'


  plot_grp3:
    type: "spatial_bias"
    fig_kwargs: # optional; For all spatial plots, specify map_kwargs here too.
      states: True  # such as whether to show the state boundaries
      figsize: [10, 5]
      counties: True
    text_kwargs:
      fontsize: 16.
    domain_type: ["custom:box"]
    domain_name: ["Front Range"]
    domain_info:
      'Front Range':
        bounds: [-105.5, -104., 39.16, 40.5]  
    data: ["pandora_CAMX"]
    data_proc:
      rem_obs_nan: True
      set_axis: True
      use_ylabel: True

  plot_grp4:
    type: "spatial_overlay"
    fig_kwargs:
      states: True
      counties: True
      figsize: [10, 5]
    text_kwargs:
      fontsize: 16.
    domain_type: ["custom:box"]
    domain_name: ["Front Range"]
    domain_info:
      'Front Range':
        bounds: [-105.5, -104., 39.16, 40.5] 
    data: ["pandora_CAMX"]
    data_proc:
      rem_obs_nan: True
      set_axis: True
      ylabel: "NO$_2$"

  plot_grp5:
    type: "boxplot"
    fig_kwargs:
      figsize: [8, 6]
    text_kwargs:
      fontsize: 20.
    domain_type: ["custom:box"]
    # ^ List of domain types: 'all' or any domain in obs file.
    #   (e.g., airnow: epa_region, state_name, siteid, etc.)
    domain_name: ["Front Range"]
    domain_info:
      'Front Range':
        bounds: [-105.5, -104., 39.16, 40.5]
    data: ["pandora_CAMX"]
    data_proc:
      rem_obs_nan: True
      set_axis: False


stats:
  stat_list: ["MB", "MdnB", "R2", "RMSE"]
  round_output: 2 # optional; defaults to rounding to 3rd decimal place
  output_table: True
  # ^ Always outputs a .txt file.
  #   Optional to also output a Matplotlib figure table (image).
  output_table_kwargs: # optional
    figsize: [7, 3]
    fontsize: 12.
    xscale: 1.4
    yscale: 1.4
  edges: "horizontal"
  domain_type: ["custom:box"]
  domain_name: ["Front Range"]
  domain_info:
    'Front Range':
      bounds: [-105.5, -104., 39.16, 40.5]
  data: ["pandora_CAMX"]
